--! IF YOU ARE USING LOADSTRING() FOR USING THIS, THE EXPANDTABLE FUNCTION CAN STILL BE USED.

local Form = string.format;
function Or(Variable, Checks)
	for Int, Value in pairs(Checks) do
		if Variable == Value then
			return true;
		end;
	end;
	return false;
end;
function ExpandTable(Table1)
	local Tabs = 1;
	local Results = "{";
	local Loop = nil;
	local Types = {
		["BrickColor"] = BrickColor,
		["Color3"] = Color3,
		["ColorSequenceKeypoint"] = ColorSequenceKeypoint,
		["DockWidgetPluginGuiInfo"] = DockWidgetPluginGuiInfo,
		["FloatCurveKey"] = FloatCurveKey,
		["Font"] = Font,
		["Instance"] = Instance,
		["NumberRange"] = NumberRange,
		["PathWaypoint"] = PathWaypoint,
		["Ray"] = Ray,
		["Rect"] = Rect,
		["RotationCurveKey"] = RotationCurveKey,
		["TweenInfo"] = TweenInfo,
		["UDim2"] = UDim2,
		["Axes"] = Axes,
		["Faces"] = Faces,
		["OverlapParams"] = OverlapParams,
		["RaycastParams"] = RaycastParams,
		["Region3"] = Region3,
		["Region3int16"] = Region3int16,
		["CFrame"] = CFrame,
		["Enum"] = Enum,
		["PhysicalProperties"] = PhysicalProperties,
		["UDim"] = UDim,
		["Vector2"] = Vector2,
		["Vector2int16"] = Vector2int16,
		["Vector3"] = Vector3,
		["Vector3int16"] = Vector3int16
	};
	local function GetIndexByValueInTable(Value1, Table)
		for Index, Value2 in pairs(Table) do
			if Value1 == Value2 then
				return Index;
			end;
		end;
	end;
	local function TypeToString(Value)
		return (typeof(Value) == "BrickColor" and Form("BrickColor.new(%d)", Value.Number))
			or (typeof(Value) == "Color3" and Form("Color3.new(%d, %d, %d)", Value.R, Value.G, Value.B))
			or (typeof(Value) == "ColorSequenceKeypoint" and Form("ColorSequenceKeypoint.new(%d, Color3.new(%s))", Value.Time, tostring(Value.Value)))
			or (typeof(Value) == "DockWidgetPluginGuiInfo" and Form(
				"DockWidgetPluginGuiInfo.new(Enum.InitialDockState.%s, %s, %s, %d, %d, %d, %d)",
				string.match(string.split(tostring(Value), " ")[1], "InitialDockState:(%a+)"),
				Value.InitialEnabled,
				Value.InitialEnabledShouldOverrideRestore,
				Value.FloatingXSize,
				Value.FloatingYSize,
				Value.MinWidth,
				Value.MinHeight))
			or (typeof(Value) == "Enums" and "Enum")
			or (typeof(Value) == "EnumItem" and Form("Enum.%s.%s", Value.EnumType, Value.Name))
			or (typeof(Value) == "FloatCurveKey" and Form("FloatCurveKey.new(%d, %d, Enum.KeyInterpolationMode.%s)", Value.Time, Value.Value, Value.Interpolation.Name))
			or (typeof(Value) == "Font" and Form("Font.new(\"%s\", Enum.FontWeight.%s, Enum.FontStyle.%s)", Value.Family, Value.Weight.Name, Value.Style.Name))
			or (typeof(Value) == "function" and Value == Types[typeof(Value)].new and typeof(Value)..".new" or "function(...)return...end")
			or (typeof(Value) == "Instance" and (Value == game and "game" or (Value.Parent == nil and Form("Instance.new(\"%s\")", Value.ClassName) or "game."..Value:GetFullName())))
			or (typeof(Value) == "NumberRange" and Form("NumberRange.new(%d, %d)", Value.Min, Value.Max or Value.Min))
			or (typeof(Value) == "PathWaypoint" and Form("PathWaypoint.new(Vector3.new(%s), Enum.PathWaypointAction.%s, \"%s\")", tostring(Value.Position), Value.Action.Name, Value.Label))
			or (typeof(Value) == "Ray" and Form("Ray.new(Vector3.new(%s), Vector3.new(%s))", tostring(Value.Origin), tostring(Value.Direction)))
			or (typeof(Value) == "Rect" and Form("Rect.new(%s, %s)", tostring(Value.Min), tostring(Value.Max)))
			or (typeof(Value) == "RotationCurveKey" and Form("RotationCurveKey.new(%d, CFrame.new(%s), Enum.KeyInterpolationMode.%s)", Value.Time, tostring(Value.Value), Value.Interpolation.Name))
			or (typeof(Value) == "string" and Form("\"%s\"", Value))
			or (typeof(Value) == "TweenInfo" and Form(
				"TweenInfo.new(%d, Enum.EasingStyle.%s, Enum.EasingDirection.%s, %d, %s, %d)",
				Value.Time,
				Value.EasingStyle.Name,
				Value.EasingDirection.Name,
				Value.RepeatCount,
				Value.Reverses,
				Value.DelayTime))
			or (typeof(Value) == "UDim2" and Form("UDim2.new(%s, %s)", tostring(Value.X), tostring(Value.Y)))
			or Or(typeof(Value), {"Axes", "Faces", "OverlapParams", "RaycastParams", "Region3", "Region3int16"}) == true and Form("%s.new(--[[ CANT GET ]])", typeof(Value))
			or Or(typeof(Value), {"CFrame", "Enum", "PhysicalProperties", "UDim", "Vector2", "Vector2int16", "Vector3", "Vector3int16"}) == true and Form("%s.new(%s)", typeof(Value), tostring(Value))
			or tostring(Value);
	end;
	Loop = function(Table2)
		for Int, Value1 in pairs(Table2) do
			if typeof(Value1) == "table" then
				if Or(Value1, Types) == true then
					Results ..= Form("\n%s[%s] = %s,", table.concat(table.create(Tabs, "    ")), TypeToString(Int), GetIndexByValueInTable(Value1, Types));
				else
					Results ..= Form("\n%s[%s] = {", table.concat(table.create(Tabs, "    ")), typeof(tonumber(Int)) == "number" and tostring(Int) or Form("\"%s\"", tostring(Int)));
					Tabs += 1;
					Loop(Value1);
					Tabs -= 1;
					Results ..= Form("\n%s},", table.concat(table.create(Tabs, "    ")));
				end
			else
				Results ..= Form("\n%s[%s] = %s,", table.concat(table.create(Tabs, "    ")), TypeToString(Int), TypeToString(Value1));
			end;
		end;
	end;
	Loop(Table1);
	return Form("%s\n};", Results);
end;
