--! SCRIPT WILL BREAK IF ROBLOX INSTANCE IS UNFOCUSED, AND WILL STOP

local Players = game:GetService("Players");
local Player = Players.LocalPlayer;

local CoinsVip = workspace.Vip_COINS.Coins;
local CoinsSpawn = workspace.Map_COINS;
local CoinsMap = workspace.CoinFolder.Coins;
local Mines = workspace.Mines;

function Animate(Parent, Time, Style, Direction, Animation)
	game:GetService("TweenService"):Create(Parent, TweenInfo.new(Time, Style, Direction, 0, false, 0), Animation):Play();
end;
function CaptureCoins(Parent)
	for Int, Coin in pairs(Parent:GetChildren())do
		Coin.CFrame = Player.Character.HumanoidRootPart.CFrame;
	end;
	Parent.ChildAdded:Connect(function(Coin)
		wait();
		Coin.CFrame = Player.Character.HumanoidRootPart.CFrame;
	end);
end;
CaptureCoins(CoinsVip);
CaptureCoins(CoinsSpawn);
CaptureCoins(CoinsMap);

for Int, Mine in pairs(workspace.Mines:GetChildren())do Mine:Remove()end;
workspace.Mines.ChildAdded:Connect(function(Mine)wait()Mine:Remove()end);

Player.Idled:Connect(function()
	game:GetService("VirtualUser"):CaptureController();
	game:GetService("VirtualUser"):ClickButton2(Vector2.new());
end);

while true do
	Animate(Player.Character.HumanoidRootPart, 0.5, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, {
		CFrame = CFrame.new(workspace:FindFirstChild("Start").Position+Vector3.new(-1, 3, 0)),
	});
	wait(1.5);
	Animate(Player.Character.HumanoidRootPart, 3, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, {
		CFrame = CFrame.new(Vector3.new(-85359, Player.Character.HumanoidRootPart.Position.Y, Player.Character.HumanoidRootPart.Position.Z)),
	});
	wait(3.1);
	Animate(Player.Character.HumanoidRootPart, 4, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, {
		CFrame = CFrame.new(Vector3.new(-85359, -660, Player.Character.HumanoidRootPart.Position.Z)),
	});
	wait(5);
	Player.Character.Humanoid.Health = 0;
	local TimeWithHumanoid = 0;
	while true do
		TimeWithHumanoid += wait();
		if Player.Character == nil or Player.Character:FindFirstChild("Humanoid") == nil or Player.Character.Humanoid.Health <= 0 then
			TimeWithHumanoid = 0;
		end;
		if TimeWithHumanoid >= 5 then
			break;
		end;
	end;
end;
