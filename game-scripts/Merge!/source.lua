--! THIS SCRIPT WORKS 50% OF THE TIME ON PRIVATE SERVERS AND 10% ON PUBLIC SERVERS
--! THIS PERCENTAGE IS CAUSED BY SERVER LAG AND LATENCY DUE TO ROBLOX'S PHYSICS SYSTEM.

local Players = game:GetService("Players");
local Player = Players.LocalPlayer;

(sethiddenproperty or set_hidden_property or set_hidden_prop)(Player, "MaximumSimulationRadius", math.pow(math.huge, math.huge) * math.huge);
(sethiddenproperty or set_hidden_property or set_hidden_prop)(Player, "SimulationRadius", math.pow(math.huge, math.huge) * math.huge);

function CreateHighlight(Parent)
	local Highlight = Instance.new("Highlight", Parent);
	Highlight.Adornee = Parent;
	Highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop;
	Highlight.Enabled = true;
	Highlight.FillColor = Parent.Color;
	Highlight.FillTransparency = 0;
	Highlight.Name = "";
	Highlight.OutlineTransparency = 1;
end;
function GetMatchingBalls()
	local ServerMax = workspace.ServerMax.Value;
	local LastBall = nil;
	for Int1 = ServerMax, 0, -1 do
		for Int2, Value in pairs(workspace.Balls:GetChildren()) do
			if Value.Name == "Ball"..Int1 then
				LastBall = LastBall or Value;
				if LastBall ~= Value then
					return LastBall, Value;
				end;
				LastBall = Value;
			end;
		end;
		LastBall = nil;
	end;
	return nil, nil;
end;

while wait(0.1) do
	local Ball1, Ball2 = GetMatchingBalls();
	if Ball1 ~= nil and Ball2 ~= nil then
		CreateHighlight(Ball1);
		CreateHighlight(Ball2);
		firetouchinterest(Ball1, Ball2, 1);
	   	wait();
	    firetouchinterest(Ball1, Ball2, 0);
	end;
end;
